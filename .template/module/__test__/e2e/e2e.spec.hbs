import request from 'supertest';
import { JestSetupE2E } from '../../../../common/config/jest/jest-setup.e2e';
import { JEST_TIMEOUT } from '../../../../common/constants/jest.constants';

describe('{{namePascalCase}}Controller (e2e)', () => {
  let app;

  const setup = new JestSetupE2E();

  beforeAll(async () => {
    const result = await setup.init();
    app = result.app;
  }, JEST_TIMEOUT);

  afterAll(async () => {
    await setup.close();
  }, JEST_TIMEOUT);

  describe('/v1/{{nameSnakeCase}}', () => {
    it('should return all {{nameSnakeCase}}s', async () => {
      const response = await request(app.getHttpServer()).get('/v1/{{nameSnakeCase}}');

      expect(response.status).toBe(200);
      expect(response.body).toBeInstanceOf(Array);
    });
  });
});
